"use strict";(self.webpackChunkdemariage=self.webpackChunkdemariage||[]).push([[965],{8965:(e,s,t)=>{t.r(s),t.d(s,{default:()=>K});var l=t(2791),r=t(7689),a=t(4695),o=t(7477),i=t(1134),n=t(9230),d=t(9254),c=t(1655),m=t(3960),u=t(1649),x=t(3962),b=t(8439),p=t(3012),h=t(184);const g=e=>{let{title:s,subtitle:t,children:l,footer:r}=e;return(0,h.jsx)("div",{className:"mb-6 flex sm:pb-10 sm:pt-16",children:(0,h.jsxs)("div",{className:"w-full max-w-screen-sm rounded-2xl border-gray-100 bg-white px-3 py-6 xs:px-4 sm:m-auto sm:border-2 sm:px-20 sm:py-12 sm:shadow-md",children:[(0,h.jsxs)("div",{className:"mb-14 mt-4 md:text-center",children:[(0,h.jsx)("div",{className:"text-xl font-bold sm:text-3xl",children:s}),(0,h.jsx)("div",{className:"mt-1 text-sm font-semibold text-gray-400 sm:mt-3 sm:text-base",children:t})]}),l,(0,h.jsx)("div",{className:"text-center sm:mt-4",children:(0,h.jsx)("div",{className:"mb-2 mt-8 text-center sm:mt-14",children:r})})]})})},j=(0,l.memo)(g);var N=t(8007);const y=e=>{var s,t;return(0,N.Ry)().shape({email:(0,N.Z_)().email(null!==(s=e("emailInvalid"))&&void 0!==s?s:"").required(null!==(t=e("emailRequired"))&&void 0!==t?t:"")})};var v=t(3853),w=t(1087);const f=()=>{const{t:e}=(0,n.$G)();return(0,h.jsx)("div",{className:"text-left",children:(0,h.jsxs)(w.rU,{to:x.Fy.LOGIN,className:"flex items-center justify-start font-semibold text-gray-500 hover:text-primary-700 hover:underline sm:inline-block",children:[(0,h.jsx)(v.YFh,{className:"mb-1 mr-2 inline-block"}),(0,h.jsx)("span",{children:e("login")})]})})},I=(0,l.memo)(f),S=()=>{const{t:e}=(0,n.$G)(),s=(0,r.s0)(),[t,g]=(0,l.useState)(!1),[N,v]=(0,l.useState)(null),{control:w,handleSubmit:f}=(0,i.cI)({resolver:(0,a.X)(y(e))}),S=f((async t=>{g(!0);try{await p.ON.forgetPassword(t.email),v(null),s("".concat(x.Fy.RESET_PASSWORD,"?email=").concat(t.email))}catch(l){l instanceof o.d7&&v({code:u.n.ACCOUNT_NOT_EXISTS,message:e("emailNotExists",{email:t.email})})}finally{g(!1)}}));return(0,b.Z)(e("forgetPassword")),(0,h.jsx)(j,{title:e("forgetYourPassword"),subtitle:e("forgetPasswordSubtitle"),footer:(0,h.jsx)(I,{}),children:(0,h.jsxs)("form",{className:"grid grid-cols-1 gap-6",onSubmit:S,children:[N&&(0,h.jsx)(d.b,{title:e("forgetPasswordError"),message:N.message,type:"danger",className:"mb-2"}),(0,h.jsx)(m.II,{type:"text",label:e("email"),name:"email",className:"block",disabled:t,control:w}),(0,h.jsx)(c.z,{type:"submit",disabled:t,isLoading:t,children:e("forgetPassword")})]})})},R=(0,l.memo)(S);var k=t(763),E=t(2020),T=t(2353),O=t(5792);const C=e=>{var s,t,l;return(0,N.Ry)().shape({email:(0,N.Z_)().email(null!==(s=e("emailInvalid"))&&void 0!==s?s:"").required(null!==(t=e("emailRequired"))&&void 0!==t?t:""),password:(0,N.Z_)().required(null!==(l=e("passwordRequired"))&&void 0!==l?l:"")})},A=()=>{var e;const{t:s}=(0,n.$G)(),[t]=(0,w.lr)();return(0,h.jsxs)(h.Fragment,{children:[s("doNotHaveAccount"),(0,h.jsx)(w.rU,{to:"".concat(x.Fy.REGISTER,"?redirect=").concat(encodeURIComponent(null!==(e=t.get("redirect"))&&void 0!==e?e:"")),className:"ml-1 block font-semibold underline hover:text-primary-700 sm:inline-block",children:s("createNow")})]})},P=(0,l.memo)(A),_=()=>{var e;const{t:s}=(0,n.$G)(),t=(0,T.Z)(O.A.yz),[o,g]=(0,l.useState)(!1),[N,y]=(0,l.useState)(null),[v]=(0,w.lr)(),f=(0,r.s0)(),{control:I,handleSubmit:S,watch:R,...A}=(0,i.cI)({resolver:(0,a.X)(C(s))}),_=R("email"),q=S((async e=>{g(!0);try{const s=await p.ON.loginWithEmailAndPassword(e);(0,E.setAuthToken)({token:s.token}),f("/")}catch(s){(0,k.isEmpty)(s)||y(s)}finally{g(!1)}}));return(0,b.Z)(s("login")),(0,h.jsx)(j,{title:s("loginTitle"),subtitle:s("loginSubtitle",{appName:t}),footer:(0,h.jsx)(P,{}),children:(0,h.jsx)(i.RV,{control:I,handleSubmit:S,watch:R,...A,children:(0,h.jsxs)("form",{onSubmit:q,className:"grid grid-cols-1 gap-6",children:[N&&(0,h.jsx)(d.b,{title:s("loginError"),message:N.message,type:"danger",className:"mb-2",children:N.code===u.n.ACCOUNT_NOT_EXISTS&&(0,h.jsx)(w.rU,{to:"".concat(x.Fy.REGISTER,"?email=").concat(encodeURIComponent(_||""),"&redirect=").concat(encodeURIComponent(null!==(e=v.get("redirect"))&&void 0!==e?e:"")),children:s("createWithEmail")})}),(0,h.jsx)(m.II,{name:"email",label:s("email"),className:"block",control:I,disabled:o}),(0,h.jsx)(m.II,{type:"password",label:s("password"),name:"password",className:"block",control:I,disabled:o}),(0,h.jsx)("div",{className:"-mb-1.5 -mt-2 flex justify-end",children:(0,h.jsx)(w.rU,{to:x.Fy.FORGET_PASSWORD,className:"text-center text-sm font-semibold text-gray-400 hover:underline",role:"link",tabIndex:-1,children:s("forgetYourPassword")})}),(0,h.jsx)(c.z,{type:"submit",disabled:o,isLoading:o,children:s("login")})]})})})},q=(0,l.memo)(_);var U=t(7852),Z=t(92);const F=e=>{var s,t,l,r,a;return(0,Z.wN)({name:(0,N.Z_)().required(null!==(s=e("nameRequired"))&&void 0!==s?s:""),username:(0,N.Z_)().required(null!==(t=e("usernameRequired"))&&void 0!==t?t:""),email:(0,N.Z_)().email(null!==(l=e("emailInvalid"))&&void 0!==l?l:"").required(null!==(r=e("emailRequired"))&&void 0!==r?r:""),password:(0,N.Z_)().required(null!==(a=e("passwordRequired"))&&void 0!==a?a:"")})},G=()=>{var e;const{t:s}=(0,n.$G)(),[t]=(0,w.lr)();return(0,h.jsxs)(h.Fragment,{children:[s("alreadyHaveAccount"),(0,h.jsx)(w.rU,{to:"".concat(x.Fy.LOGIN,"?redirect=").concat(encodeURIComponent(null!==(e=t.get("redirect"))&&void 0!==e?e:"")),className:"ml-1 block font-semibold underline hover:text-primary-700 sm:inline-block",children:s("loginNow")})]})},L=(0,l.memo)(G),W=()=>{var e;const{t:s}=(0,n.$G)(),[t,a]=(0,l.useState)(!1),[o,g]=(0,l.useState)(null),[N]=(0,w.lr)(),y=(0,r.s0)(),{control:v,handleSubmit:f,setValue:I,watch:S}=(0,i.cI)({resolver:F(s)}),R=S("email",""),k=f((async e=>{a(!0),await p.ON.register(e).then((e=>{(0,E.setAuthToken)({token:null===e||void 0===e?void 0:e.token}),y("/")})).catch((t=>{const{status:l}=t.response.data;l!==U.UNPROCESSABLE_ENTITY?g({...t}):g({code:u.n.ACCOUNT_EXISTS,message:s("emailAlreadyExists",{email:e.email})})})).finally((()=>{a(!1)}))}));return(0,b.Z)(s("register")),(0,l.useEffect)((()=>{const e=N.get("email");e&&I("email",e)}),[N,I]),(0,h.jsx)(j,{title:s("registerTitle"),subtitle:s("registerSubtitle"),footer:(0,h.jsx)(L,{}),children:(0,h.jsxs)("form",{className:"grid grid-cols-1 gap-6",onSubmit:k,children:[o&&(0,h.jsx)(d.b,{title:s("registerError"),message:o.message,type:"danger",className:"mb-2",children:o.code===u.n.ACCOUNT_EXISTS&&(0,h.jsx)(w.rU,{to:"".concat(x.Fy.LOGIN,"?email=").concat(encodeURIComponent(null!==R&&void 0!==R?R:""),"&redirect=").concat(encodeURIComponent(null!==(e=N.get("redirect"))&&void 0!==e?e:"")),children:s("loginNow")})}),(0,h.jsx)(m.II,{type:"text",label:s("name"),name:"name",className:"block",disabled:t,control:v}),(0,h.jsx)(m.II,{type:"text",label:s("username"),name:"username",className:"block",disabled:t,control:v}),(0,h.jsx)(m.II,{type:"text",label:s("email"),name:"email",disabled:t,className:"block",control:v}),(0,h.jsx)(m.II,{type:"password",label:s("password"),name:"password",className:"block",disabled:t,control:v}),(0,h.jsxs)("label",{htmlFor:"isAcceptedTerms",className:"group hidden items-center justify-start space-x-4",children:[(0,h.jsx)(m.XZ,{name:"isAcceptedTerms",className:"flex-shrink-0",disabled:t,control:v}),(0,h.jsx)("div",{className:"text-sm font-semibold leading-6 text-gray-400",children:(0,h.jsxs)(n.cC,{i18nKey:"isAcceptedTerm",t:s,children:["0",(0,h.jsx)(w.rU,{to:"/",className:"ml-1 underline hover:text-black",children:"1"})]})})]}),(0,h.jsx)(c.z,{type:"submit",disabled:t,isLoading:t,children:s("register")})]})})},X=(0,l.memo)(W);var $=t(4033),Y=t(9300);const z=e=>{var s,t,l,r;return(0,N.Ry)().shape({password:(0,N.Z_)().required(null!==(s=e("passwordRequired"))&&void 0!==s?s:""),password_confirmation:(0,N.Z_)().required(null!==(t=e("passwordConfirmationRequired"))&&void 0!==t?t:"").oneOf([(0,N.iH)("password")],null!==(l=e("passwordConfirmationNotMatch"))&&void 0!==l?l:""),otp:(0,N.Z_)().required(null!==(r=e("otpRequired"))&&void 0!==r?r:"")})},D=()=>{const{t:e}=(0,n.$G)();return(0,h.jsx)("div",{className:"text-left",children:(0,h.jsxs)(w.rU,{to:x.Fy.LOGIN,className:"flex items-center justify-start font-semibold text-gray-500 hover:text-primary-700 hover:underline sm:inline-block",children:[(0,h.jsx)(v.YFh,{className:"mb-1 mr-2 inline-block"}),(0,h.jsx)("span",{children:e("login")})]})})},H=(0,l.memo)(D),M=()=>{const{t:e}=(0,n.$G)(),s=(0,Y.Z)(),[t,g]=(0,l.useState)(!1),[N,y]=(0,l.useState)(null),v=(0,r.s0)(),{control:f,handleSubmit:I}=(0,i.cI)({resolver:(0,a.X)(z(e))}),{search:S}=(0,r.TH)(),R=(0,l.useMemo)((()=>S.split("?email=").pop()),[S]),k=I((async t=>{g(!0);try{await p.ON.resetPassword(String(R),t),y(null),v("".concat(x.Fy.LOGIN,"?code=").concat(u.n.RESET_PASSWORD)),s.success(e("resetPasswordSuccessfully"))}catch(l){l instanceof o.d7&&y({code:u.n.OTP_INCORRECT,message:e("otpIncorrect")})}finally{g(!1)}}));return(0,b.Z)(e("resetPassword")),(0,h.jsx)(j,{title:e("resetYourPassword"),subtitle:e("resetPasswordSubtitle"),footer:(0,h.jsx)(H,{}),children:(0,h.jsxs)("form",{className:"grid grid-cols-1 gap-6",onSubmit:k,children:[N?(0,h.jsx)(d.b,{title:e("resetPasswordError"),message:N.message,type:"danger",className:"mb-2",children:(0,h.jsx)(w.rU,{to:x.Fy.FORGET_PASSWORD,children:e("requestNewLink")})}):(0,h.jsx)(d.b,{title:e("resetPasswordLinkSent"),message:e("resetPasswordMessage",{email:R}),type:"success",className:"mb-2"}),(0,h.jsx)($.Z,{name:"otp",className:"block w-full",disabled:t,control:f,quantity:6}),(0,h.jsx)(m.II,{type:"password",label:e("password"),name:"password",className:"block",disabled:t,control:f}),(0,h.jsx)(m.II,{type:"password",label:e("passwordConfirmation"),name:"passwordConfirmation",className:"block",disabled:t,control:f}),(0,h.jsx)(c.z,{type:"submit",disabled:t,isLoading:t,children:e("resetPassword")})]})})},V=(0,l.memo)(M),B=()=>(0,h.jsxs)(r.Z5,{children:[(0,h.jsx)(r.AW,{path:"login",element:(0,h.jsx)(q,{})}),(0,h.jsx)(r.AW,{path:"register",element:(0,h.jsx)(X,{})}),(0,h.jsx)(r.AW,{path:"forget-password",element:(0,h.jsx)(R,{})}),(0,h.jsx)(r.AW,{path:"reset-password",element:(0,h.jsx)(V,{})})]}),K=(0,l.memo)(B)}}]);
//# sourceMappingURL=965.006a999e.chunk.js.map